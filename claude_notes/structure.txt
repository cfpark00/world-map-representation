WM_1 Project Structure
======================

Root Directory: /n/holylfs06/LABS/finkbeiner_lab/Users/cfpark00/datadir/WM_1
(Also accessible via symlink: /n/home12/cfpark00/WM_1)

.
├── analysis/                           # Analysis outputs and scripts
│   ├── nearby_cities_distribution.png
│   ├── representation_dynamics.py
│   ├── spatial_analysis.py
│   ├── spatial_analysis_csv.py
│   └── spatial_analysis_results.json
│
├── claude_notes/                       # Documentation and notes
│   ├── docs/                          # Various documentation
│   │   └── mdx-blog/                  # Blog post materials
│   ├── jobs/                          # Job scripts and configs
│   ├── logs/                          # Training and execution logs
│   └── tips/                          # Development tips and philosophy
│       ├── research-blog-writing-lessons.md
│       └── researchpy_philosophy.md
│
├── configs/                            # Training and dataset configuration files
│   ├── v1/                           # Previous version configs (archived)
│   ├── atlantis_default.yaml         # Default Atlantis region configuration  
│   ├── atlantis_region_mapping.json  # Atlantis country code to region mapping
│   ├── dist_*.yaml                   # Distance dataset generation configs
│   └── train_*.yaml                  # Training experiment configs
│
├── data/                              # Raw data files
│   └── geographic_mappings/           # JSON mappings for countries to regions
│       └── country_to_region.json     # Country code to custom region mapping
│
├── notebooks/                         # Jupyter notebooks for exploration
│   ├── decode_coordinates.ipynb
│   ├── load_dataset.ipynb
│   └── representation_study.ipynb
│
├── outputs/                           # Generated outputs
│   ├── datasets/                     # Processed datasets
│   │   ├── cities/                  # Main city dataset with optional Atlantis
│   │   │   ├── cities.csv          # Combined world + Atlantis cities
│   │   │   ├── metadata.json       # Dataset metadata
│   │   │   └── atlantis_config.yaml # Copy of Atlantis config used
│   │   ├── dist_100k_1M_42/         # Distance prediction dataset
│   │   ├── loc_100k_all_42/         # Location prediction dataset
│   │   └── rw*_100k_*_42/           # Random walk datasets
│   │
│   ├── experiments/                  # Training experiment outputs
│   │   ├── dist_100k_1M_*/          # Distance model experiments
│   │   ├── loc_100k_*/              # Location model experiments
│   │   └── rw*_100k_*/              # Random walk experiments
│   │       └── checkpoints/         # Model checkpoints
│   │
│   ├── figures/                     # Generated visualizations
│   │   ├── cities_map.png          # All cities with same color
│   │   └── cities_map_atlantis.png # Cities with Atlantis highlighted
│   │
│   └── tokenizer/                   # Custom tokenizer
│       └── wm1_tokenizer/          # WM1-specific tokenizer files
│
├── reports/                          # Analysis reports and blog posts (date-prefixed)
│   ├── 2025-08-31-emergent-geographic-representations.zip
│   ├── 2025-08-31-emergent-geographic-representations/
│   ├── 2025-08-31-world-models-from-city-coordinates.zip
│   ├── 2025-08-31-world-models-from-city-coordinates/
│   ├── 2025-09-01-catastrophic-forgetting-of-representations.zip
│   ├── 2025-09-01-catastrophic-forgetting-of-representations/
│   ├── 2025-09-02-finetuning-atlantis.zip
│   └── 2025-09-02-finetuning-atlantis/
│
├── scripts/                          # Convenience shell scripts
│   ├── create_dataset.sh            # Create city dataset with Atlantis
│   ├── create_distance_datasets.sh  # Create all distance datasets
│   └── plot_cities.sh               # Generate city visualization plots
│
├── scratch/                          # Temporary/experimental files
│
├── src/                              # Source code
│   ├── analysis/                    # Analysis scripts
│   │   └── analyze_representations.py
│   │
│   ├── data_processing/             # Dataset creation scripts
│   │   ├── create_atlantis_cross_dataset.py  # Atlantis cross-pairs dataset (fixed bias)
│   │   ├── create_atlantis_inter_dataset.py  # Inter-Atlantis only dataset
│   │   ├── create_city_dataset.py  # Main script: world cities + optional Atlantis
│   │   ├── create_distance_dataset.py
│   │   ├── create_location_dataset.py
│   │   ├── mix_datasets.py         # Mix multiple datasets with specified sample counts
│   │   └── create_randomwalk_dataset.py
│   │
│   ├── misc_tools/                  # Miscellaneous utilities
│   │   └── regenerate_gif_with_pause.py
│   │
│   ├── tokenizer/                   # Tokenizer setup
│   │   ├── __init__.py
│   │   ├── create_hf_tokenizer.py
│   │   └── tokenizer_config.py
│   │
│   ├── training/                    # Training scripts
│   │   ├── archive/                 # Old/deprecated training scripts
│   │   └── train.py                 # Main training script
│   │
│   ├── visualization/               # Visualization tools
│   │   ├── create_city_map.py
│   │   └── plot_cities.py          # Plot cities with optional region highlighting
│   │
│   └── utils.py                     # Core utility functions (ResearchPy philosophy)
│
├── .venv/                            # UV virtual environment
│
├── api.md                            # API documentation
├── CLAUDE.md                         # Project instructions for Claude
├── memo.txt                          # Project notes
├── README.md                         # Project README
├── .env                              # Environment variables
├── .env.example                      # Example environment file
└── .gitignore                        # Git ignore file

Key Concepts:
-------------
- Training configs in configs/ define experiments
- Datasets are generated into outputs/datasets/
- Models are saved in outputs/experiments/
- All source code follows ResearchPy philosophy (utils.py for HOW, scripts for WHAT/WHEN)
- Use UV virtual environment: source .venv/bin/activate or uv run

Common Commands:
---------------
# Train a model (from project root)
python src/training/train.py configs/[config_name].yaml

# Create city dataset with Atlantis
bash scripts/create_dataset.sh
# Or manually:
python src/data_processing/create_city_dataset.py \
    --threshold 100000 --seed 42 --max-id 10000 \
    --atlantis-config configs/atlantis_default.yaml \
    --output outputs/datasets/cities --overwrite

# Generate visualizations
bash scripts/plot_cities.sh

# Create training datasets (from project root)  
python src/data_processing/create_distance_dataset.py
python src/data_processing/create_location_dataset.py
python src/data_processing/create_randomwalk_dataset.py